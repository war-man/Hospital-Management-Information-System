@model Caresoft2._0.CustomData.EMR_OPD_Data
@{

    ViewBag.Title = "HTC Service Summary";
    ViewBag.showTopMenu = true;
    ViewBag.WideView = true;
    Layout = "~/Views/Shared/_EMRForms.cshtml";

}
<style>
    .overflow-container {
        overflow: auto;
        width:72em;
        
    }
</style>
<div >
    
        
        <div class="panel panel-primary  shadow  caresoft-panel">
            <div class="panel-heading custom-navbar">
                <p>@ViewBag.Title</p>
            </div>
            <div class="panel-body">
                <div class="col-sm-12">
                    <form @*id="service-summary"*@ method="post" action="@Url.Action("SaveHTCServiceSummaryData", "EMR")">

                        <input name="OPDNo" hidden value="@ViewBag.OpdNo" />

                        <label><strong>Patient Details</strong></label>
                        <table class="table-form">

                            <tr>
                                <td>
                                    <label>Key Population</label>
                                </td>
                                <td>
                                    <select name="KeyPopulation" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>SW</option>
                                        <option>MSM</option>
                                        <option>IDU</option>
                                    </select>
                                </td>

                                <td><label>Ever Tested?</label></td>
                                <td>
                                    <select name="EverTested" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>

                                    </select>
                                </td>

                                <td><label>Re-Testing</label></td>
                                <td>
                                    <input type="number" name="Retesting" class="text-box box-lg" />
                                </td>

                            </tr>

                            <tr>

                                <td><label>Ever had an HIV self test this year?</label></td>
                                <td>
                                    <select name="SelfTest" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>

                                    </select>
                                </td>

                                <td><label>Disability</label></td>
                                <td>
                                    <select name="Disability" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>NA</option>
                                        <option>D</option>
                                        <option>B</option>
                                        <option>M</option>
                                        <option>P</option>
                                        <option>O</option>

                                    </select>
                                </td>

                                <td><label>Consent</label></td>
                                <td>
                                    <select name="Consent" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>

                                    </select>
                                </td>

                            </tr>

                            <tr>

                                <td><label>Client tested as</label></td>
                                <td>
                                    <select name="ClientTestedAs" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>I</option>
                                        <option>C</option>
                                    </select>
                                </td>

                                <td><label>HIV Test 1</label></td>
                                <td>
                                    <select name="HIVTest1" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>N</option>
                                        <option>P</option>
                                        <option>I</option>
                                    </select>
                                </td>

                                <td><label>HIVTest2</label></td>
                                <td>
                                    <select name="HIVTest2" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>N</option>
                                        <option>P</option>
                                        <option>I</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td><label>Final Result</label></td>
                                <td>
                                    <select name="FinalResult" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>N</option>
                                        <option>P</option>
                                        <option>Ic</option>
                                    </select>
                                </td>
                                <td><label>FinalResultGiven</label></td>
                                <td>
                                    <select name="FinalResult" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>

                                    </select>
                                </td>
                                <td><label>TB Screening</label></td>
                                <td>
                                    <select name="TBScreening" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>PrTB</option>
                                        <option>NS</option>
                                        <option>ND</option>
                                        <option>TBRX</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td><label>Couple Discordant</label></td>
                                <td>
                                    <select name="CoupleDiscordant" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>
                                        <option>NA</option>

                                    </select>
                                </td>

                                <td><label>Linked To Care</label></td>
                                <td>
                                    <select class="text-box box-lg" name="LinkedToCare">
                                        <option>Select</option>
                                        <option>Y</option>
                                        <option>N</option>

                                    </select>
                                </td>

                                <td><label>HTS Provider</label></td>
                                <td>
                                    <input type="text" name="HTSProvider" class="text-box box-lg " />
                                </td>
                            </tr>

                            <tr>

                                <td><label>Strategy</label></td>
                                <td>
                                    <select name="Strategy" class="text-box box-lg">
                                        <option>Select</option>
                                        <option>HP</option>
                                        <option>NP</option>
                                        <option>VI</option>
                                        <option>VS</option>
                                        <option>HB</option>
                                        <option>MO</option>
                                        <option>O</option>

                                    </select>
                                </td>
                            </tr>
                        </table>

                        <div class="form-group">
                            <label class="info-title col-md-12" for="black_name"><strong>Remarks </strong><span><font color="black"><b></b></font></span></label>
                            <span id='message_full_name'></span>
                            <textarea style="width: 250px;height:70px;" name="Remarks" type="text" class="text-box unicase-form-control text-input" id="extension_number"
                                      placeholder="Enter plan">
                                        
                                    </textarea>
                        </div>

                        <br />
                        <input id="Button1" class="btn btn-sm btn-primary" type="submit" style="margin-right:100px" value="Save" />

                    </form>
                    <br />

                    <div  class="overflow-container">
                    
                        @Html.Partial("HTCGrid", Model.OpdRegister.HTCServiceSummaries)
                    </div>



                </div>
        </div>
            </div>
        
    </div>
        @section scripts{
            <script>
                var logContainer = $('#htc-summary-results-log');
                getRecentInfo();

                function getRecentInfo() {
            $.ajax({
                type: "GET",
                url: "/EMR/GetMostRecentPhysicalExam/"+@Model.Patient.Id,
               
                success: function (result) {
                    $('#patient-recent-physical-info').html(result);
                    getLog();
                }
            });
        }
        
        function getLog() {

            var containerWidth = logContainer.width();
            $.ajax({
                type: "GET",
                url: "/EMR/GetHTCSummaryGrid/" +@Model.Patient.Id,
                success: function (result) {
                    logContainer.html(result);
                    logContainer.css("width", containerWidth);
                }
            });
        }
        @*$("#service-summary").submit(function (e) {
            e.preventDefault();
            var data = $(this).serialize();

            console.log(data);
            $.ajax({
                type: "POST",
                url: "@Url.Action("SaveHTCServiceSummaryData", "EMR")",
                data: data,
                success: function (result) {

                    $("#htc-summary-results-log").empty();
                    $("#htc-summary-results-log").append(result);
                }
            });
        });*@
        
       </script>
        }
